nowDate = new Date();
state = "Love on you ðŸ’–";


const rpc = require("discord-rpc");
const client = new rpc.Client({ transport: 'rpc' });

client.login({ clientId : 939437409773428737 }).catch(console.error); 

client.on('ready', () => {
	console.log('Your presence works now check your discord profile :D');
	DiscordRP();
});

function DiscordRP(){
	client.request('SET_ACTIVITY', {
	pid: process.pid,
	activity: {
		details: 'VAUHALLAN Bois Persan > ORSAY-VILLE Gare RER',
		state: state,
	assets: {
			large_image: 'gpm-logo',
			large_text: 'Grand Paris Moulon by Creations AgoraS-114',
			small_image: '7',
			small_text: 'Ligne 7',
	}}});
	}

function updateRP(line){
	if (line == 71){
		client.setActivity({
			details: 'VAUHALLAN Bois Persan > ORSAY-VILLE Gare RER',
			state: state,
			startTimestamp: nowDate,
			largeImageKey: 'gpm-logo',
			smallImageKey: '7',
			largeImageText: 'Grand Paris Moulon by Creations AgoraS-114',
			smallImageText: 'Ligne 7',
			instance: false
		});
		console.log(`> Updated RP`);
	}
}





//




const clientId = '332188828812967939';

DiscordRPC.register(clientId);
//new DiscordRPC.Client({ transport: 'ipc' });
const rpc = require('discord-rich-presence/browser')(clientId);
const startTimestamp = new Date();

async function setActivity(line) {
	ToggleView('91.06A');
	if (!rpc || !mainWindow) {
		return;
	}
	if (line == 7) {
		rpc.updatePresence({//setActivity
			details: 'VAUHALLAN Bois Persan > ORSAY-VILLE Gare RER',
			state: state,
			startTimestamp: startTimestamp,
			largeImageKey: 'gpm-logo',
			smallImageKey: '7',
			//largeImageText: 'Grand Paris Moulon by Creations AgoraS-114',
			//smallImageText: 'Ligne 7',
			instance: false
		});
	}
}

rpc.on('ready', () => {
	setActivity(0);

	setInterval(() => {
		setActivity(0);
	}, 15e3);
});

//rpc.login({ clientId }).catch(console.error);